# 動画・連番画像ラベリングツール

Streamlitで構築され、Dockerで動作するWebベースの連番画像用ラベリングツールです。

### 前提条件

* [Docker](https://docs.docker.com/engine/install/)
* [Docker Compose](https://docs.docker.com/compose/install/)

### 利用方法

#### 1. プロジェクトの準備

プロジェクトの全ファイル（`Makefile`, `docker-compose.yml`, `labeling_app.py`, `requirements.txt`）を一つのディレクトリにまとめてください。

#### 2. アプリケーションの起動

ターミナルを開き、プロジェクトディレクトリに移動して、以下のコマンドを実行します。ラベリングしたい画像フォルダが格納されているディレクトリのパスを指定する必要があります。

```
make run DATA_DIR=/path/to/your/data_directory
```

**実行例:**

* **macOS / Linux の場合:**
    ```
    make run DATA_DIR=/Users/myname/Pictures/datasets
    ```

このコマンドは以下の処理を実行します:

1.  Dockerイメージが存在しない場合にビルドします。
2.  アプリケーションをバックグラウンドで起動します。
3.  指定した`DATA_DIR`を、コンテナ内の`/data`ディレクトリにマウント（接続）します。**ファイルのコピーは発生しません。**

#### 3. アプリケーションへのアクセス

Webブラウザを開き、以下のアドレスにアクセスしてください:
**[http://localhost:38501](http://localhost:38501)**

#### 4. ツールの操作

1.  サイドバーのドロップダウンメニューから、ラベリング対象の画像が含まれるフォルダを選択します。
2.  **「このフォルダでラベリング開始」**ボタンをクリックします。
3.  メイン画面でラベリング作業を行います。作業状況は自動で保存されます。

#### 5. アプリケーションの停止

ツールを停止するには、ターミナルで以下のコマンドを実行します。

```
make down
```

これにより、コンテナが安全に停止・削除されます。作業状態は`.session_state.pkl`ファイルに保存されているため、次回起動時に復元されます。

### 主な機能

* **ダイレクトフォルダ参照**: PC上のどのフォルダからでも、データを移動・コピーすることなく直接ラベリングできます。
* **作業状態の自動保存・復元**: 最後に表示していた画像、全てのラベル、各種設定が自動で保存・復元されます。
* **ラベルの簡単設定**: テキストエリアでの手動編集に加え、`.txt`ファイルをアップロードしてラベルを一括設定できます。
* **柔軟なCSVエクスポート**: ラベリング結果をCSV形式で出力します。未ラベルの画像を出力に含めるか選択可能です。
